---
export interface Project {
	title: string;
	description: string;
	tags?: string[];
	href?: string;
	repo?: string;
	year?: string;
	image?: string;
}

interface Props {
	projects: Project[];
	title?: string;
	description?: string;
}

const { projects, title = "Proyectos destacados", description }: Props = Astro.props;
const hasProjects = Array.isArray(projects) && projects.length > 0;
---

<section class="mx-auto flex w-full max-w-6xl flex-col gap-6 px-4 py-12 sm:gap-8 sm:px-6 sm:py-16">
	<header class="flex flex-col gap-2 text-center sm:gap-3">
		<span class="text-xs font-semibold uppercase tracking-[0.4em] text-emerald-400 sm:text-sm">
			Portfolio
		</span>
		<h2 class="text-2xl font-bold text-white sm:text-3xl md:text-4xl">{title}</h2>
		{description && (
			<p class="mx-auto max-w-2xl text-sm text-slate-300 sm:text-base">
				{description}
			</p>
		)}
	</header>

	{hasProjects ? (
		<div class="grid gap-4 sm:gap-6 sm:grid-cols-2 xl:grid-cols-3">
			{projects.map((project) => (
				<article
					class="group relative flex h-full flex-col rounded-2xl border border-slate-800/70 bg-slate-900/40 p-4 shadow-lg shadow-black/20 backdrop-blur transition active:scale-[0.98] sm:rounded-3xl sm:p-6 sm:hover:-translate-y-1 sm:hover:border-emerald-400/60 sm:hover:shadow-emerald-500/20"
				>
					<div class="flex items-start justify-between gap-4">
						<div class="flex flex-col gap-2">
							{project.year && (
								<span class="text-xs font-semibold uppercase tracking-[0.3em] text-slate-400">
									{project.year}
								</span>
							)}
							<h3 class="text-xl font-semibold text-white">
								{project.title}
							</h3>
						</div>
						{project.image && (
							<img
								src={project.image}
								alt={`Vista previa de ${project.title}`}
								class="h-14 w-14 rounded-xl border border-slate-700 object-cover"
								loading="lazy"
							/>
						)}
					</div>

					<p class="mt-4 text-sm text-slate-300">{project.description}</p>

					{project.tags && project.tags.length > 0 && (
						<ul class="mt-6 flex flex-wrap gap-2">
							{project.tags.map((tag) => (
								<li
									class="rounded-full border border-emerald-500/30 bg-emerald-500/10 px-3 py-1 text-xs font-medium uppercase tracking-wide text-emerald-300"
								>
									{tag}
								</li>
							))}
						</ul>
					)}

					<div class="mt-8 flex flex-wrap items-center gap-3 text-sm font-semibold">
						{project.href && (
							<a
								class="inline-flex items-center gap-2 rounded-full bg-emerald-500 px-4 py-2 text-slate-950 transition hover:bg-emerald-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-300"
								href={project.href}
								target="_blank"
								rel="noreferrer"
							>
								<span>Ver proyecto</span>
								<svg
									viewBox="0 0 24 24"
									aria-hidden="true"
									class="h-4 w-4"
									fill="currentColor"
								>
									<path
										d="M5 12.75a.75.75 0 0 1 .75-.75h6.69L9.22 9.03a.75.75 0 1 1 1.06-1.06l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H5.75A.75.75 0 0 1 5 12.75Z"
									/>
								</svg>
							</a>
						)}
						{project.repo && (
							<a
								class="inline-flex items-center gap-2 rounded-full border border-slate-700 px-4 py-2 text-slate-200 transition hover:border-slate-500 hover:text-white focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-400"
								href={project.repo}
								target="_blank"
								rel="noreferrer"
							>
								<span>Repositorio</span>
								<svg
									viewBox="0 0 24 24"
									aria-hidden="true"
									class="h-4 w-4"
									fill="currentColor"
								>
									<path
										fill-rule="evenodd"
										d="M12 2C6.477 2 2 6.486 2 12.019c0 4.422 2.865 8.17 6.839 9.504.5.092.683-.217.683-.483 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.342-3.369-1.342-.455-1.157-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.071 1.53 1.032 1.53 1.032.892 1.532 2.341 1.089 2.91.833.091-.647.35-1.089.636-1.34-2.221-.253-4.555-1.114-4.555-4.956 0-1.095.39-1.99 1.029-2.689-.103-.253-.446-1.272.098-2.65 0 0 .84-.269 2.75 1.026A9.543 9.543 0 0 1 12 6.844c.85.004 1.705.115 2.504.337 1.909-1.295 2.748-1.026 2.748-1.026.546 1.378.203 2.397.1 2.65.64.699 1.028 1.594 1.028 2.689 0 3.852-2.339 4.7-4.566 4.949.36.31.679.919.679 1.852 0 1.337-.012 2.417-.012 2.745 0 .269.18.58.688.481A10.024 10.024 0 0 0 22 12.019C22 6.486 17.523 2 12 2Z"
										clip-rule="evenodd"
									/>
								</svg>
							</a>
						)}
					</div>
				</article>
			))}
		</div>
	) : (
		<div class="rounded-3xl border border-dashed border-slate-700 bg-slate-900/30 p-12 text-center text-sm text-slate-400">
			Aún no hay proyectos registrados. Agrega elementos a la lista `projects` para mostrarlos aquí.
		</div>
	)}
</section>

